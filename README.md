# oleg0xfe_infra
oleg0xfe Infra repository


# ДЗ 3

Способ подключения к someinternalhost в одну команду:
    ssh -i ~/.ssh/appuser -J appuser@158.160.102.129 appuser@10.128.0.17

Дополнительное задание:
    подключение с помощью команды 'ssh someinternalhost'

    на локальном ПК в конфиг ~/.ssh/config добавить:

    Host someinternalhost
        HostName      10.128.0.17
        User          appuser
        IdentityFile  ~/.ssh/appuser
        ProxyJump     appuser@158.160.102.129

VPN:
    bastion_IP = 158.160.102.129
    someinternalhost_IP = 10.128.0.17

# ДЗ 4

    testapp_IP = 62.84.124.19
    testapp_port = 9292

# ДЗ 5

    Выполнено следующее:
        - установлен Packer плагин для работы с Yandex Cloud
        - создан Packer шаблон для создания обрза на базе ubuntu 16.04
        - добавлены Input Variables для параметризации шаблона
        - создан образ по шаблону
        - запущена виртуальная машина, установлено и запущено приложение reddit

# ДЗ 6

    Выполнено следующее:
        - установлен terraform и инициализирован для рабо с Yandex Cloud
        - создан образ виртуальной машины с помощью Packer
        - создан конфигурационный файл main.tf для описания объектов инфраструктуры
        - добавлены Input Variables для параметризации конфигурации
        - выполнено создание инфраструктуры и установка приложения с помощью terraform

# ДЗ 7

    Выполнено следующее:
        - создан ресурс сети и подсети
        - packer шаблон разбит на 2: образ БД; образ приложения
        - определение приложения и БД вынесены из основного файла main.tf в отдельные файлы
        - создание модулей db, app
        - создание отдельных рабочих каталогов для сред stage, prod

# ДЗ 8

    Выполнено следующее:
        - установлен ansible
        - создан/оптимизирован inventory file
        - создан playbook
        - запущен playbook

    При первом запуске playbook'а статус заданий changed=0 (т.е. никаких изменений не было сделано),
    т.к. каталог reddit уже создан на этаме развертывания инфаструктуры с помощью terraform.

# ДЗ 9

    Выполнено следующее:
        - создан playbook с одним play для выполнения всех задач
        - создан шаблон файла конфигурации для MongoDB и приложения
        - созданы обработчики handlers для MongoDB и приложения
        - задачи связанные с MongoDB, приложением и деплоем вынесены в отдкльняе play
        - задачи связанные с MongoDB, приложением и деплоем вынесены в отдкльняе playbook
        - изменены шаблоны packer, добавлены вызовы ansible playbook для установки и конфигурирования MongoDB и приложения
        - пересобраны образы виртуальных машин с помощью packer
        - развернута инфраструктура с помощью terrafotm с использованием новых образов

